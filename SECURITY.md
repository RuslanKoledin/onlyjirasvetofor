# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ Traffic Light Server

## üõ°Ô∏è –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1. –ó–∞—â–∏—Ç–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü–∞—Ä–æ–ª–∏ –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `JIRA_URL`, `JIRA_USERNAME`, `JIRA_PASSWORD`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `.env` —Ñ–∞–π–ª–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ git)

#### ‚úÖ –§–∞–π–ª .gitignore –æ–±–Ω–æ–≤–ª—ë–Ω
```gitignore
.env
*.env
*.env.local
server.properties.local
```

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### ‚úÖ JiraClient.java (—Å—Ç—Ä–æ–∫–∏ 22-36)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ null –∏ –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ URL (–¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å http:// –∏–ª–∏ https://)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ URL

```java
if (jiraUrl == null || jiraUrl.trim().isEmpty()) {
    throw new IllegalArgumentException("JIRA URL cannot be null or empty");
}
if (!jiraUrl.startsWith("http://") && !jiraUrl.startsWith("https://")) {
    throw new IllegalArgumentException("JIRA URL must start with http:// or https://");
}
```

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### ‚úÖ –ü–∞—Ä–æ–ª–∏ –ù–ï –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –ª–æ–≥–∏
- –í ServerLauncher.java –≤—ã–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ URL –∏ username
- –ü–∞—Ä–æ–ª—å –ù–ò–ö–û–ì–î–ê –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- –í—Å–µ –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ systemd journal (—Ç—Ä–µ–±—É–µ—Ç sudo)

### 4. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —Ñ–∞–π–ª—ã

#### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø—Ä–∞–≤–∞ (–≤ install.sh)
```bash
chmod 600 /opt/svetoofor/server.properties  # –¢–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å
chmod 644 /opt/svetoofor/svetoofor-server.jar
chown svetoofor:svetoofor /opt/svetoofor/*
```

### 5. –ü—Ä–∏–Ω—Ü–∏–ø –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π

#### ‚úÖ –ù–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `svetoofor` (–Ω–µ root!)
- –°–æ–∑–¥–∞—ë—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ shell –¥–æ—Å—Ç—É–ø–∞: `/bin/false`
- Systemd –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
  ```ini
  User=svetoofor
  NoNewPrivileges=true
  PrivateTmp=true
  ProtectSystem=strict
  ProtectHome=true
  ```

### 6. –°–µ—Ç–µ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### ‚úÖ WebSocket –±–µ–∑ SSL (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é WebSocket —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 52521 –±–µ–∑ SSL
- –î–ª—è production: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ nginx reverse proxy —Å SSL/TLS

#### ‚úÖ Firewall –ø—Ä–∞–≤–∏–ª–∞
```bash
# –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω—É–∂–Ω—ã—Ö IP
sudo ufw allow from 10.10.0.0/16 to any port 52521 proto tcp
```

### 7. HTTP Client –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### ‚úÖ –¢–∞–π–º–∞—É—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (JiraClient.java:42-45)
```java
this.httpClient = new OkHttpClient.Builder()
    .connectTimeout(30, TimeUnit.SECONDS)
    .readTimeout(30, TimeUnit.SECONDS)
    .writeTimeout(30, TimeUnit.SECONDS)
    .build();
```

#### ‚úÖ Basic Authentication
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Basic Auth —Å Base64
- –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ HTTPS (jiraportal.cbk.kg)

## üö® –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (—Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è)

### ‚ö†Ô∏è 1. WebSocket –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞**: –õ—é–±–æ–π –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ WebSocket —Å–µ—Ä–≤–µ—Ä—É

**–†–µ—à–µ–Ω–∏–µ**:
- –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WSS (WebSocket Secure) —á–µ—Ä–µ–∑ nginx
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø firewall –ø—Ä–∞–≤–∏–ª–∞–º–∏

### ‚ö†Ô∏è 2. –ù–µ—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è WebSocket —Ç—Ä–∞—Ñ–∏–∫–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –°–∏–≥–Ω–∞–ª—ã —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º

**–†–µ—à–µ–Ω–∏–µ** (–¥–ª—è production):
```nginx
server {
    listen 443 ssl;
    server_name traffic-light.yourdomain.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    location / {
        proxy_pass http://localhost:52521;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

### ‚ö†Ô∏è 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç DoS –∞—Ç–∞–∫ –Ω–∞ JIRA API

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å rate limiting –≤ JiraPoller
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å exponential backoff –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### ‚ö†Ô∏è 4. JSON –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞**: Jackson –º–æ–∂–µ—Ç –±—ã—Ç—å —É—è–∑–≤–∏–º –∫ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º JSON –¥–∞–Ω–Ω—ã–º

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞**:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `@JsonIgnoreProperties(ignoreUnknown = true)`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

## üìã –ß–µ–∫-–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–µ–ø–ª–æ—è

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ production:

- [ ] –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- [ ] –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `.env` —Ñ–∞–π–ª—ã –ù–ï –≤ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- [ ] –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –æ—Ç default –∑–Ω–∞—á–µ–Ω–∏–π
- [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ—Ä—Ç—É 52521
- [ ] –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ nginx reverse proxy —Å SSL/TLS
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞ 600 –Ω–∞ server.properties
- [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ systemd journal
- [ ] –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `mvn versions:display-dependency-updates`
- [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
- [ ] –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–±–æ—è

## üîç –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏

```bash
# OWASP Dependency Check
mvn org.owasp:dependency-check-maven:check

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Snyk
snyk test
```

### –¢–µ–∫—É—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Maven):
- `okhttp:4.12.0` - HTTP client (—Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
- `jackson-databind:2.15.2` - JSON –ø–∞—Ä—Å–µ—Ä (–ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ CVE)
- `javafx:21` - GUI framework
- `java-websocket:1.5.6` - WebSocket library

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ CI/CD:
```yaml
# GitHub Actions example
- name: OWASP Dependency Check
  run: mvn org.owasp:dependency-check-maven:check
```

## üîê –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–∞—Ä–æ–ª—è–º

### –î–ª—è JIRA —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ API Token –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è**
   - –í JIRA: Profile ‚Üí Security ‚Üí API Tokens
   - –°–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è

2. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
   - –î–ª–∏–Ω–∞: –º–∏–Ω–∏–º—É–º 12 —Å–∏–º–≤–æ–ª–æ–≤
   - –°–æ–¥–µ—Ä–∂–∏—Ç: –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–≤–∞—Ä–Ω—ã–µ —Å–ª–æ–≤–∞
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

3. **–†–æ—Ç–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π**:
   - –ú–µ–Ω—è–π—Ç–µ –∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ password manager –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è

4. **–†–∞–∑–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π**:
   - Development: –æ–¥–Ω–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
   - Staging: –¥—Ä—É–≥–∏–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
   - Production: —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## üìû –û—Ç—á—ë—Ç—ã –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ —É—è–∑–≤–∏–º–æ—Å—Ç—å:

1. **–ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π issue –≤ GitHub**
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ email –Ω–∞: security@incuat.kg
3. –£–∫–∞–∂–∏—Ç–µ:
   - –û–ø–∏—Å–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
   - –®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - –í–æ–∑–º–æ–∂–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [OWASP Java Security Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Java_Security_Cheat_Sheet.html)
- [Secure Coding Guidelines for Java](https://www.oracle.com/java/technologies/javase/seccodeguide.html)
- [JIRA REST API Security](https://developer.atlassian.com/cloud/jira/platform/security-overview/)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-12-23
**–í–µ—Ä—Å–∏—è**: 1.0.0
