# Как собрать EXE установщик

## Требования

1. **Inno Setup 6.0+** - скачать с https://jrsoftware.org/isinfo.php
2. **Maven** - для сборки jar файла
3. **Windows** - установщик собирается только на Windows

## Пошаговая инструкция

### 1. Соберите проект

```bash
mvn clean package
```

Это создаст файл `target/svetooofor-client.jar`

### 2. Установите Inno Setup

- Скачайте с https://jrsoftware.org/isdl.php
- Запустите установщик
- Установите с настройками по умолчанию

### 3. Откройте скрипт в Inno Setup

- Запустите **Inno Setup Compiler**
- File → Open → выберите `svetofor-installer.iss`

### 4. Скомпилируйте установщик

- Нажмите **Build → Compile** (или F9)
- Подождите несколько секунд

### 5. Готово!

Установщик будет создан здесь:
```
installer/output/svetofor-setup.exe
```

## Что делает установщик

При запуске `svetofor-setup.exe`:

1. ✅ Проверяет наличие Java (требуется Java 17+)
2. ✅ Копирует файлы в `C:\Program Files\Svetofor\`
   - svetooofor-client.jar
   - client.properties
   - icon.ico
3. ✅ Создает ярлык в меню Пуск
4. ✅ Опционально: создает ярлык на рабочем столе
5. ✅ Опционально: добавляет в автозагрузку (по умолчанию включено)
6. ✅ Регистрирует в "Установка и удаление программ"
7. ✅ Создает деинсталлятор

## Использование установщика

### Для сотрудников:

1. Положите `svetofor-setup.exe` в FTP папку
2. Сотрудник скачивает файл
3. Двойной клик на `svetofor-setup.exe`
4. Next → Next → Install → Готово!

### Удаление:

**Способ 1:** Панель управления → Программы → Удалить программу → Светофор JIRA

**Способ 2:** В папке установки запустить `unins000.exe`

## Настройка установщика

Если нужно изменить параметры, отредактируйте `svetofor-installer.iss`:

- **Версия**: строка 6 `#define MyAppVersion "1.0.0"`
- **Название**: строка 5 `#define MyAppName "Светофор JIRA"`
- **Папка установки**: строка 13 `DefaultDirName={autopf}\Svetofor`

После изменений пересоберите установщик (F9 в Inno Setup).

## Автоматическая сборка (через командную строку)

Если Inno Setup установлен, можно собрать через команду:

```bash
"C:\Program Files (x86)\Inno Setup 6\ISCC.exe" svetofor-installer.iss
```

Это удобно для автоматизации сборки.

## Распространение

После сборки файл `svetofor-setup.exe` можно:

1. Положить на FTP сервер
2. Разослать по email
3. Положить в сетевую папку `\\server\share\svetofor-setup.exe`
4. Разместить на внутреннем портале компании

Размер установщика: ~10-15 МБ (зависит от размера jar файла)

## Troubleshooting

**Ошибка: Java not found**
- Убедитесь что Java установлена
- Проверьте: `java -version` в командной строке

**Ошибка: Access denied**
- Запустите установщик от имени администратора
- Правой кнопкой → Запуск от имени администратора

**Установщик не собирается**
- Проверьте что собран jar: `target/svetooofor-client.jar`
- Проверьте что существует файл `client.properties`
- Проверьте что существует `src/main/resources/44_85245.ico`
